Mccloud::Config.run do |config|
  # All Mccloud configuration is done here. For a detailed explanation
  # and listing of configuration options, please view the documentation
  # online.

  config.mccloud.prefix="mccloud"

  config.vm.define :web do |web_config|
    web_config.vm.ami = "ami-cef405a7"
    web_config.vm.provider="AWS"

    #web_config.vm.provisioner=:chef_solo
    #web_config.vm.provisioner=:puppet

    web_config.vm.provider_options={ 
      # ID = "ami-cef405a7" = x64 Ubuntu 10.10
      :image_id => 'ami-cef405a7', 
      # Flavors
      :flavor_id => 't1.micro',
      #:flavor_id => 'm1.large',
      :groups => %w(ec2securitygroup), :key_name => "ec2-keyname",
      :availability_zone => "us-east-1b" 
    }
    web_config.vm.forward_port("http", 80, 8080)
    web_config.vm.user="ubuntu"
    web_config.vm.bootstrap="ruby-bootstrap.sh"
    web_config.vm.key="my-ec2-key.pem"
  end

  ### Provisioners
  config.vm.provision :puppet do |puppet|
    puppet.pp_path = "/tmp/vagrant-puppet"
    #puppet.manifests_path = "puppet/manifests"
    #puppet.module_path = "puppet/modules"
    puppet.manifest_file = "newbox.pp"
  end

  config.vm.provision :chef_solo do |chef|
     chef.cookbooks_path = ["<your cookboopath>"]
     chef.add_recipe("<some recipe>")
     # You may also specify custom JSON attributes:
     chef.json.merge!({})
  end
end
