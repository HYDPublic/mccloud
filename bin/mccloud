#!/usr/bin/env ruby

require 'rubygems'
require 'thor'
require 'bundler'
require 'mccloud'
require 'mccloud/generators'
require 'mccloud/config'

class MccloudCLI < Thor 
  
  desc "init [AMI-ID]", "initializes a box from a template" 
  method_options :force => :boolean
  def init(amiId=nil)
	Mccloud::Generators.run_cli Dir.pwd, File.basename(__FILE__), Mccloud::VERSION, ARGV
  end

  desc "templates", "list amis available" 
  def templates(query=nil)
    Mccloud::CLI.list_templates(query)
  end
  
  desc "up", "bring a machine up"
  method_options :force => :boolean
  def up(boxname=nil)
	#if File.exist?(path)
	Kernel.load File.join(Dir.pwd,"Mccloudfile")
	puts Mccloud::Config.config.ami
  end

  desc "halt [NAME]", "shutdown the machine"
  method_options :force => :boolean  
  def halt(boxname)
  end

end

MccloudCLI.start

